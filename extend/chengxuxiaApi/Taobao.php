<?php /* ç¨‹åºä¾ CMSæ·˜å®å®¢ç³»ç»Ÿ ç¨‹åºä¾ ç‰ˆæƒæ‰€æœ‰ æŠ€æœ¯è®ºå›æ”¯æŒ: bbs.chengxuxia.com QQ: 573907419 æ­£ç‰ˆæˆæƒé˜²æ­¢å‡ºç°æ¼æ´åé—¨
-- enphp : https://git.oschina.net/mz/mzphp2
 */   namespace chengxuxiaApi;error_reporting(E_ALL^E_NOTICE);define('·', 'Ú');Å Ü²†˜ğà³‡¿„÷×¢ÎÃËúƒ¸¶Ï´äå‹–…ôÜ¦Ò­ë€Ÿ‡Í£ş¦ÅÍê’ÉîÊ€¿€¤å™»ë˜’á§¿Í¨Îì¯¯ÄÖı¯èÇ´Èİ´Öƒšğ¾†€×™âşÙ°§¨×Å;$GLOBALS[·] = explode('|>|@|.', 'ƒ¸å|>|@|.˜Şà|>|@|.|.|7|*|>|@|.API|.|7|*api_config|.|7|*taobao|.|7|*key|.|7|*secret|.|7|*taobao.TopSdk|.|7|*code|.|7|*msg|.|7|*æ·˜å®APIæœªå¡«å†™|.|7|*{}|.|7|*data|.|7|*model|.|7|*ã€Š|.|7|*ï¿¥|.|7|*results|.|7|*tbk_coupon|.|7|*|.|7|*num_iid|.|7|*goods_id|.|7|*title|.|7|*cid|.|7|*intro|.|7|*item_description|.|7|*price|.|7|*zk_final_price|.|7|*coupon_price|.|7|*coupon_info|.|7|*å‡|.|7|*å…ƒ|.|7|*discount_price|.|7|*volume|.|7|*img|.|7|*pict_url|.|7|*sellerId|.|7|*seller_id|.|7|*nick|.|7|*commission_rate|.|7|*shop_type|.|7|*user_type|.|7|*1|.|7|*B|.|7|*C|.|7|*coupon_url|.|7|*coupon_click_url|.|7|*&src=njrt_qytk&tj1=1&tj2=1&mt=1|.|7|*coupon_surplus|.|7|*coupon_remain_count|.|7|*coupon_total|.|7|*coupon_total_count|.|7|*coupon_receive|.|7|*coupon_explain|.|7|*start_time|.|7|*coupon_start_time|.|7|*end_time|.|7|*coupon_end_time|.|7|*|.|7|*favorites_title,favorites_id,type|.|7|*num_iid,title,pict_url,small_images,reserve_price,zk_final_price,user_type,provcity,item_url,seller_id,volume,nick,shop_title,zk_final_price_wap,event_start_time,click_url,event_end_time,tk_rate,status,type,coupon_click_url,coupon_end_time,coupon_info,coupon_start_time,coupon_total_count, coupon_remain_count|.|7|*WEB_COUPON_PID|.|7|*_');Š††ºïÎØ¤—;error_reporting(E_ALL^E_NOTICE);define($GLOBALS{·}[0],$GLOBALS{·}{0x001});ÜÑŸ€ïëõŸ‡ï¨†êñ‹şòºÑÅ©Úˆ ‹Ä¥º£áè´ˆ¤ôöÃûæìƒÒŞÒÒÊ¤™ôş;$GLOBALS[ƒ¸å]=explode($GLOBALS{·}[0x0002],$GLOBALS{·}{0x00003});‹å»ÆŠ¯‹Ñ¸ö­„ºªë§®¿‡½;class Taobao{private $appkey;private $secretKey;private $class;public function __construct(){$ûÎŠ=&$GLOBALS{ƒ¸å};if($º’¿ò =get_config($ûÎŠ[0],$ûÎŠ{0x001})){if($º’¿ò [$ûÎŠ[0x0002]][$ûÎŠ{0x00003}]&&$º’¿ò [$ûÎŠ[0x0002]][$ûÎŠ[0x000004]]){$this->appkey=trim($º’¿ò [$ûÎŠ[0x0002]][$ûÎŠ{0x00003}]);$this->secretKey=trim($º’¿ò [$ûÎŠ[0x0002]][$ûÎŠ[0x000004]]);vendor($ûÎŠ{0x05});$this->class=new \TopClient;$this->class->appkey=$this->appkey;$this->class->secretKey=$this->secretKey;}else{return json_encode([$ûÎŠ[0x006]=>0,$ûÎŠ{0x0007}=>$ûÎŠ[0x00008]]);}}}public function createTaoKeys($¡¥ñ,$‘šù,$¢¸ãü,$›ğ¿='0'){$ˆÓ–„=&$GLOBALS{ƒ¸å};if(is_object($this->class)){$‹‘=new \TbkTpwdCreateRequest;$‹‘->setUserId($›ğ¿);$‹‘->setText($¡¥ñ);$‹‘->setUrl($‘šù);$‹‘->setLogo($¢¸ãü);$‹‘->setExt($ˆÓ–„{0x000009});$ÑÎ¾=$this->class->execute($‹‘);$ï=object_to_array($ÑÎ¾);if(property_exists($ÑÎ¾,$ˆÓ–„[0x0a])){$ï=object_to_array($ÑÎ¾);if(isset($ï[$ˆÓ–„[0x0a]][$ˆÓ–„{0x00b}])){$ú¼õ–=$ï[$ˆÓ–„[0x0a]][$ˆÓ–„{0x00b}];return str_replace($ˆÓ–„[0x000c],$ˆÓ–„{0x0000d},$ú¼õ–);}}}}private function tbkDgItemCouponGet($Ç¸ï,$µ±,$§ñš,$Å°,$éÑÀ){$¬ßÌû=&$GLOBALS{ƒ¸å};Ñ¨ù;if(is_object($this->class)){$ßÁ Ğì=[];$ƒ´şô=[];$®»€ã=$this->getAdzoneId();$Ñ¤=new \TbkDgItemCouponGetRequest;$Ñ¤->setAdzoneId($®»€ã);$Ñ¤->setPlatform($µ±);$Ñ¤->setCat($§ñš);$Ñ¤->setPageSize($Å°);$Ñ¤->setQ($Ç¸ï);$Ñ¤->setPageNo($éÑÀ);$ş„=$this->class->execute($Ñ¤);if(property_exists($ş„,$¬ßÌû[0x00000e])){$ú£Ãç¦=object_to_array($ş„);if(isset($ú£Ãç¦[$¬ßÌû[0x00000e]][$¬ßÌû{0x0f}])){$ƒ´şô=$ú£Ãç¦[$¬ßÌû[0x00000e]][$¬ßÌû{0x0f}];}}return $ƒ´şô;æî„½±„®Ïğ¦§ö¢‡ã›¿ù Ú¹;}}public function daogouCoupon($ıñ,$ÂĞõ,$†ôº,$£öÕ‡,$¨¬){$¨°¬=&$GLOBALS{ƒ¸å};$ïŒû†=$this->tbkDgItemCouponGet($ıñ,$ÂĞõ,$¨°¬[0x0010],$£öÕ‡,$¨¬);ßÌèªÎË˜Ÿ—óô ƒÏØá›·èŞºö‡ØÅ©˜•§‘á‡ŞÊ²­—ÊÍ®¿ÃÎÂ”¨¤¯ß›…–óÊ¿;$=[];¬¥ìúÓ¬;$Ğ™˜Ö=[];¬;Êƒºç«æ¥Ô˜ÑøìÂ…èÉ£;if($ïŒû†&& isset($ïŒû†[0][$¨°¬{0x00011}])){foreach($ïŒû† as $Í){$Ğ™˜Ö[$¨°¬[0x000012]]=$Í[$¨°¬{0x00011}];$Ğ™˜Ö[$¨°¬{0x0000013}]=$Í[$¨°¬{0x0000013}];if(isset($†ôº)&& $†ôº){$Ğ™˜Ö[$¨°¬[0x014]]=$†ôº;}$Ğ™˜Ö[$¨°¬{0x0015}]=$Í[$¨°¬[0x00016]];$Ğ™˜Ö[$¨°¬{0x000017}]=$Í[$¨°¬[0x0000018]];$Ğ™˜Ö[$¨°¬{0x019}]=get_word($Í[$¨°¬[0x001a]],$¨°¬{0x0001b},$¨°¬[0x00001c]);$Ğ™˜Ö[$¨°¬{0x000001d}]=$Í[$¨°¬[0x0000018]]-$Ğ™˜Ö[$¨°¬{0x019}];‹Ÿ¯™òÛË¾ß†;$Ğ™˜Ö[$¨°¬[0x01e]]=$Í[$¨°¬[0x01e]];ÓÏé—¾ç¥à•ÊÎŸúÏÃê£€¦¼£¸…ËáÂ¾Ê“šöªÙßĞ»ô›Š†»†Õşñø;$Ğ™˜Ö[$¨°¬{0x001f}]=$Í[$¨°¬[0x00020]];†ŸÙóáßÜ«ƒãù·êë½ÃöİòĞÏÜ°â¶¼Ğ„Ö£÷Ê†×¨²Û­“ø™Ñ½‘°;–ØÑá»”¡†¢µ¡™àûù±¸ïÍÃ;$Ğ™˜Ö[$¨°¬{0x000021}]=$Í[$¨°¬[0x0000022]];Ë‰»Å™®äæÄ¾;$Ğ™˜Ö[$¨°¬{0x023}]=$Í[$¨°¬{0x023}];$Ğ™˜Ö[$¨°¬[0x0024]]=$Í[$¨°¬[0x0024]];áÉî²ÍŠñ…;$Ğ™˜Ö[$¨°¬{0x00025}]=$Í[$¨°¬[0x000026]]==$¨°¬{0x0000027}?$¨°¬[0x028]:$¨°¬{0x0029};şªº×Î‡ñ¡ÄƒÑõ¥Óö¤å©†¯˜¹ı¥Äïª›ç‰š“Ã¨ë’¯İ´óá†é‡Ùá¬¿‹²ï£ìíÈ±İóÌÆüçÙÁ‘ÆÔÀ¥‰;‚ğş£‹ß …’Øôßœëéæ·ó¢üÑâô—¢¯¾ıˆŸîˆÃúèã€;$Ğ™˜Ö[$¨°¬[0x0002a]]=$Í[$¨°¬{0x00002b}].$¨°¬[0x000002c];ÚÚáÄÁš¹ä—Ç¶ú¼Îë»ê–ÛÚŸŸÕˆ„ÖƒÂÌŞ¯¤ŞÉİÄá¥úÜáÊúÎ×·º;$Ğ™˜Ö[$¨°¬{0x02d}]=$Í[$¨°¬[0x002e]];³ê–¸;$Ğ™˜Ö[$¨°¬{0x0002f}]=$Í[$¨°¬[0x000030]];ªîš°Û;ø˜¾÷‰ú¼ê ¸ÈƒƒÃÒÛûÊ¢ÙÃğü;$Ğ™˜Ö[$¨°¬{0x0000031}]=$Í[$¨°¬[0x000030]]-$Í[$¨°¬[0x002e]];íÛ®êÄˆ¬ÕÏ—ôŠÌûšì;ß„‘Ÿ¢Š¨Ç“¾ÛÂ„ •à;$Ğ™˜Ö[$¨°¬[0x032]]=$Í[$¨°¬[0x001a]];$Ğ™˜Ö[$¨°¬{0x0033}]=strtotime($Í[$¨°¬[0x00034]]);û¶É­“Ò§¢º•ıè€Âñ¬™Á®°¶¹ü;$Ğ™˜Ö[$¨°¬{0x000035}]=strtotime($Í[$¨°¬[0x0000036]]);if($Ğ™˜Ö[$¨°¬{0x0000013}]&& $Ğ™˜Ö[$¨°¬{0x001f}]&& $Ğ™˜Ö[$¨°¬[0x000012]]&&$Ğ™˜Ö[$¨°¬{0x019}]){$[]=$Ğ™˜Ö;}}}return $;×Ùˆ‡Õ¿ĞƒÓ£ªõİ¿óÇÀ·¹íÑûœ‚²Öşæªé§ƒÃ°ŠšïÚÄıÈº;}public function favoritesGroup($‰¯¤Ê,$Ş¸¹ÚÕ='100',$­»='-1'){$×¦Úé=&$GLOBALS{ƒ¸å};½À£‚;$ì½=$×¦Úé{0x037};ÁÔ¡úüÑÊ‹ş‡€×­³—ë™©ÙÀ¬š­ê·¤×úæ­œâ¼™´ˆ¥´¦Œ¼Ä;Òàà³ı„à«Êç ßŒÆâóÍëíó–òÃß¿§æç²ßÈ;ÙñÙ³³‡Îáñ‡‡Ê‚íøÑ¶¸†¾İ»Î„ÈŒ;if(is_object($this->class)){$‰áø=new \TbkUatmFavoritesGetRequest;$‰áø->setPageNo($‰¯¤Ê);$‰áø->setPageSize($Ş¸¹ÚÕ);$‰áø->setFields($×¦Úé[0x0038]);$‰áø->setType($­»);$ÔÓ–ˆ=$this->class->execute($‰áø);if(property_exists($ÔÓ–ˆ,$×¦Úé[0x00000e])){$ì½=object_to_array($ÔÓ–ˆ);}}return $ì½;Îìñ™îß“±ÉÆ¸‰¥ô×ª½äóÆÆí©›ÂÀ¤§í”‡ƒáš’”äÙÍí€ÂÅª«ŸÈñòĞ´²ïÛÂİïÃåó¥;„½œÊ¡™ş;}public function favoritesGoods($åàˆ,$àËš‹='1',$Å«•·='',$‰ÆŠ='',$øú™='1',$ØŠ€='3456',$ş¦¿='100'){$à=&$GLOBALS{ƒ¸å};$éùÇµ”=$à{0x037};ş™’¸¢ØÃßÒ;$Å«•·=empty($Å«•·)?$à{0x00039}:$Å«•·;‡Ô¨¨€ÚÜò;„Öƒ;$‰ÆŠ=empty($‰ÆŠ)?$this->getAdzoneId():$‰ÆŠ;if(is_object($this->class)){$‰=new \TbkUatmFavoritesItemGetRequest;$‰->setPlatform($øú™);$‰->setPageSize($ş¦¿);$‰->setAdzoneId($‰ÆŠ);$‰->setUnid($ØŠ€);$‰->setFavoritesId($åàˆ);$‰->setPageNo($àËš‹);$‰->setFields($Å«•·);$½=$this->class->execute($‰);if(property_exists($½,$à[0x00000e])){$éùÇµ”=object_to_array($½);}}return $éùÇµ”;¸·ËŒº;†˜¶©½Ğ;}private function getAdzoneId(){$Ô=&$GLOBALS{ƒ¸å};$ö’ˆ=$Ô{0x037};ÑóŞÖ„µÚºÍäÑ‹ÕÓÂŒ›Çµ¦œíê”€óëåº¾Ùš•İĞğ˜Õê©¬¿ë;ıı”ñ¢Ëô¯›øˆıúÉ;if($úÖ”=get_config($Ô[0x00003a])){$ü±=explode($Ô{0x000003b},$úÖ”);$ö’ˆ=isset($ü±[0x00003])?$ü±[0x00003]:$Ô{0x037};}return $ö’ˆ;}}