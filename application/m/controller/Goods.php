<?php /* ç¨‹åºä¾ CMSæ·˜å®å®¢ç³»ç»Ÿ ç¨‹åºä¾ ç‰ˆæƒæ‰€æœ‰ æŠ€æœ¯è®ºå›æ”¯æŒ: bbs.chengxuxia.com QQ: 573907419 æ­£ç‰ˆæˆæƒé˜²æ­¢å‡ºç°æ¼æ´åé—¨
-- enphp : https://git.oschina.net/mz/mzphp2
 */   namespace app\m\controller;error_reporting(E_ALL^E_NOTICE);define('Î††', 'üóó');îÊ­ïË€ÕöŸî­·ƒƒµ‘ÉÊ¤µßÀ”„Û‰ùíñé¹ò—©¾˜€µ¸îãïñç¦„±ñ¨æÑéûÖÅßÀúÒª´ÅÂİ…ÚŞ»“ÍŸ„¿ˆªÃ¹ì¡ï×Æ«§Ş¦ùŠÛ¿ÌºÅ¨™¼æ¡À§©ëëã‰Ù…ø±£¿ÏÏç®õá¹Ñ¢‡ç¯¦éì‹­µµ™¡š;$_SERVER[Î††] = explode('|5|/|-', 'œ®Ş|5|/|-şš¸|5|/|-|8|@|&|5|/|-id|8|@|&?couponUrl|8|@|&http://pub.alimama.com/items/search.json?q=https%3A%2F%2Fitem.taobao.com%2Fitem.htm%3Fid%3D|8|@|&|8|@|&data|8|@|&pageList|8|@|&details|8|@|&goods_id|8|@|&title|8|@|&img|8|@|&pictUrl|8|@|&discount_price|8|@|&zkPrice|8|@|&couponAmount|8|@|&price|8|@|&coupon_price|8|@|&coupon_id|8|@|&volume|8|@|&biz30day|8|@|&intro|8|@|&coupon_url|8|@|&couponUrl|8|@|&seo_keys|8|@|&likeGoods|8|@|&WEB_CACHE_STATUS|8|@|&goods-|8|@|&goods|8|@|&è¯·è¾“å…¥æ­£ç¡®çš„å•†å“ID|8|@|&seo_title|8|@|&seo_keywords|8|@|&seo_description|8|@|&id,goods_id,cid,title,price,discount_price,coupon_price,intro,img,coupon_id,coupon_url,coupon_receive,coupon_surplus,coupon_total,volume,shop_type,ems,start_time,end_time,seo_keys|8|@|&GOODS_AUTO_STATUS|8|@|&historyGoods|8|@|&Goods|8|@|&goods|id|8|@|&in|8|@|&end_time|8|@|&gt|8|@|&id desc|8|@|&id|goods_id|8|@|&cid|8|@|&volume desc');Ÿœ­ÃÜü“Ä¬Š¦åÜÈíé±‘›‹Ÿ§¸ÔİÒö÷ôò˜’ Ûîï³ÉúÙ°Ø£ÂÔ¼ÓïÇó˜€ÈõÒÀíÈ³†ÚÓâÊñÓı»Ï×ë¨úŠêĞÇ¿À³ÙüÏâ½¾¬ñÄˆÅ¨Ò·üĞóÌ©àô¥êàö² ·ÂÔ‘ÑÒáµ â;error_reporting(E_ALL^E_NOTICE);define($_SERVER{Î††}{0},$_SERVER{Î††}[0x001]);ş™»íõÃšòêÃúü»–¶ó»øƒõ“´ÀªŞ’Ñş‘ë»şáşšÕ†š‹ƒÕ¡¹Êİ³ÎÓĞâ‰’ç“Ÿº“°§Ï°ŠÎËßŞÒùéÕĞŒ›éÃé¾•ÌÇ§Ù°»øêÎª“ŸÛî¨ıÍúø¸ÑÉÄáä¯¦Îí¼›µäõå îÑïšäõƒıÌšù…ëÃÉÎ©øõ÷ç²”—Š„¸ùÕ¨”»¸‹¿·ªÀ„Å»‰±€Ó©Íö¡µª¶ÓÂÀ×ú»®¤ĞêÜ;$_SERVER[œ®Ş]=explode($_SERVER{Î††}{0x0002},$_SERVER{Î††}[0x00003]);”ˆë™Í§£€§öĞÅøòû£©Ğåê¨á§×†÷ÃâÕí÷İÚ‘«ƒ´«ª¬­ûñ¦ïîÊš¿±†è“­Á™¦…;use app\common\controller\Mobile;use think\Db;class Goods extends Mobile{public function index(){$ùÙ†é=&$_SERVER{œ®Ş};‰ƒ‹;if($–¹³¯à=input($ùÙ†é[0])){$¬İ­=[];if(input($ùÙ†é{0x001})){$¸ü=$ùÙ†é[0x0002].$–¹³¯à;$¿Î=$this->_curl($¸ü);$ñÌÉÑ=json_decode($¿Î,!0);$ñÌÉÑ=is_array($ñÌÉÑ)?$ñÌÉÑ:$ùÙ†é{0x00003};if($ñÌÉÑ){$¤Ø±=[];$¤Ø±=$ñÌÉÑ[$ùÙ†é[0x000004]][$ùÙ†é{0x05}][0];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x0007}]=$–¹³¯à;$¬İ­[$ùÙ†é[0x006]][$ùÙ†é[0x00008]]=$¤Ø±[$ùÙ†é[0x00008]];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x000009}]=$¤Ø±[$ùÙ†é[0x0a]];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x00b}]=$¤Ø±[$ùÙ†é[0x000c]]-$¤Ø±[$ùÙ†é{0x0000d}];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é[0x00000e]]=$¤Ø±[$ùÙ†é[0x000c]];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x0f}]=$¤Ø±[$ùÙ†é{0x0000d}];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é[0x0010]]=$ùÙ†é{0x00003};$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x00011}]=$¤Ø±[$ùÙ†é[0x000012]];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x0000013}]=$¤Ø±[$ùÙ†é[0x00008]];$¬İ­[$ùÙ†é[0x006]][$ùÙ†é[0x014]]=urldecode(input($ùÙ†é{0x0015}));$¬İ­[$ùÙ†é[0x006]][$ùÙ†é[0x00016]]=$ùÙ†é{0x00003};$¬İ­[$ùÙ†é[0x006]][$ùÙ†é{0x0000013}]=$¤Ø±[$ùÙ†é[0x00008]];}$¬İ­[$ùÙ†é{0x000017}]=$ùÙ†é{0x00003};}else{if(get_config($ùÙ†é[0x0000018])){$«¶õ®Â=$ùÙ†é{0x019}.$–¹³¯à;$«¶õ®Â=md5($«¶õ®Â);if(!0x001===$¬İ­=cache($«¶õ®Â)){$¬İ­=$this->getGoodsDetails($–¹³¯à);cache($«¶õ®Â,$¬İ­);}}else{$¬İ­=$this->getGoodsDetails($–¹³¯à);œôÜÕ¡ºƒÂó€ê³ÏÌ¥—÷ä»Ñ–©üÍ «‰ğ¥åêûˆ¥€Ë™¶ÍĞ„óî›ëÓ×¾ê¼¸¡è;}}$ªÙ×=$¬İ­[$ùÙ†é[0x006]];ÌÈèÍ•ƒÎËĞ ÏÄë±âÃïÍÄ­‡æ–Ñ’ï©â±;!$ªÙ×[$ùÙ†é[0x00008]]&& $this->_404();ÕıØÍÛªí¬îü˜¡àÜ’¯¢¿·‰Õ‰œÆ³ş÷ °óõ¯„Ïüàùëéé¦;¦™³°ä÷®;$ƒú=$¬İ­[$ùÙ†é{0x000017}];Ï–ÒñÖ–­û;´¼ÌúïËóüç†¬ìÕªÍĞ–;$this->assign($ùÙ†é[0x001a],$ªÙ×);ƒ; ²ÇÇÌú÷±ó—ßÈØúúÆò‰ù‚ÙÕËçëùã±ÚÒåšÚ;äÇ­Ã;$this->assign($ùÙ†é{0x000017},$ƒú);·ªó§öè¸óÑ¿¡¾•Ìæãé¡äìè±óÍø¡’ôşŠ¬©şÔ è•ºÍ¶ùãƒ‡ÊæğìÌİÕıÑ£÷ó¶ìòÁšœÀï½©ıÒäÌ;Ö«ì;}else{$this->error($ùÙ†é{0x0001b});åúô×ç;}$this->_seo($ùÙ†é[0x001a],[$ùÙ†é[0x00008]=>$ªÙ×[$ùÙ†é[0x00008]],$ùÙ†é{0x0000013}=>$ªÙ×[$ùÙ†é{0x0000013}],$ùÙ†é[0x00000e]=>$ªÙ×[$ùÙ†é[0x00000e]],$ùÙ†é{0x0f}=>$ªÙ×[$ùÙ†é{0x0f}],$ùÙ†é[0x00001c]=>$ªÙ×[$ùÙ†é[0x00008]],$ùÙ†é{0x000001d}=>$ªÙ×[$ùÙ†é[0x00016]],$ùÙ†é[0x01e]=>$ªÙ×[$ùÙ†é{0x0000013}],]);À‰â¸ü™¦ïÚÁœ±ÊÅ°«ü¨Š®¶ğ;return $this->fetch();Û£ÅŞüÖ´É¾¡Ä¢ÒŸÀ¦®§;}private function getGoodsDetails($“íş,$¯ˆ´è=''){$Í=&$_SERVER{œ®Ş};$¨ĞƒÄƒ=$Í{0x001f};ì¶±•ÀàË±;Ç¾—¦¼íÛ‡¬üËÏĞë‘öš¸¸;if(get_config($Í[0x00020])){$¯ˆ´è=empty($¯ˆ´è)?$Í{0x00003}:$¯ˆ´è;$úæúï=new \chengxuxiaApi\Goods;$ş‰=$úæúï->getGoodsDetails($“íş,$¯ˆ´è,$¨ĞƒÄƒ);}else{if($¯ˆ´è){$ş‰[$Í{0x000021}]=Db::name($Í[0x0000022])->where([$Í{0x023}=>[$Í[0x0024],$¯ˆ´è],$Í{0x00025}=>[$Í[0x000026],time()]])->order($Í{0x0000027})->limit(0x014)->select();}$ş‰[$Í[0x006]]=Db::name($Í[0x0000022])->where([$Í[0x028]=>$“íş,$Í{0x00025}=>[$Í[0x000026],time()]])->find();$ş‰[$Í{0x000017}]=Db::name($Í[0x0000022])->where([$Í{0x0029}=>$ş‰[$Í[0x006]][$Í{0x0029}],$Í{0x00025}=>[$Í[0x000026],time()]])->order($Í[0x0002a])->limit(0x00008)->select();œß‚áãĞì˜½¤ÉÒå«Ÿ˜¶—“Ô;}return $ş‰;•’ê”›Ş£›ú„;}}