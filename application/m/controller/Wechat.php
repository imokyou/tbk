<?php /* ç¨‹åºä¾ CMSæ·˜å®å®¢ç³»ç»Ÿ ç¨‹åºä¾ ç‰ˆæƒæ‰€æœ‰ æŠ€æœ¯è®ºå›æ”¯æŒ: bbs.chengxuxia.com QQ: 573907419 æ­£ç‰ˆæˆæƒé˜²æ­¢å‡ºç°æ¼æ´åé—¨
-- enphp : https://git.oschina.net/mz/mzphp2
 */   namespace app\m\controller;error_reporting(E_ALL^E_NOTICE);define('½±Ò', 'åÛ');ıæÄ±ğ·øñ¬¡œÒ¬æ‘ñÚ¿úÀóÍ¶…ôÄÒğáŒïÈĞ¡ºˆ›¬´¼Éˆé°•ú¢ğ»±¯ëç;$_SERVER[½±Ò] = explode('|"|/|%', '¿Ç|"|/|%ú|"|/|%|/|%| |"|/|%get.echostr|/|%| get.signature|/|%| get.timestamp|/|%| get.nonce|/|%| WEB_WECAHT_TOKEN');­ˆÓ”ÃØäå“ìÀ¢½Š«¨»À£Ş²ßüãéÌÄÌùÌ ŠáãâÆÉõ´Ë·×‰Áƒ²ıÄÕÜö¶ÚÚÅÅ¨‹’¢Ø²¬º—‚á†·­½·€“éş×ÀÜÏö·«¼üÓÇõ Â£ÛÚ³İ¼¹•é÷¥¡ø;error_reporting(E_ALL^E_NOTICE);define($_SERVER{½±Ò}{0},$_SERVER{½±Ò}[0x001]);âãğÔĞÏç³™èÛàÃşñİ‘˜Î“¿Í‹»œÜ“ÜÕõÁÆË’—³Å¥Í®¯ò¡Ğ’º ¦úí²ŠªÏæ½¬½³í…€€œ´ÅÁ‚ôÃ±çÅÓ¸×Ùş‰Ç±”ñú°­¸ä›½äœÙ™áœœÖßÍ¿¥¢÷ı±Òü»š¯Ï°Ê½Şƒ¢úÁ‡—œ¡ù¸½Ğ™Œ¾®‰½ß;$_SERVER[¿Ç]=explode($_SERVER{½±Ò}{0x0002},$_SERVER{½±Ò}[0x00003]);›öêê„œ¶Âúºäöûì™ˆÑÌÙëØêª‡ôèçÑ¤„ÈïÍ«¦§àõİã­öò¶É¿µ˜úà ğÉˆÂî‹ıüÙª£éÑ…àğâÄŸÚ·Õ¥;use app\common\controller\Base;use think\Db;class Wechat extends Base{public function _initialize(){parent::_initialize();¦«İâàæŒ–‹½®¥Ğœ·¯Í–¸ÈŞ÷›”‰êØú£€¦ã‡èğô; èåòíÆãÑ‹ƒ­ÃÙÓ»À¯Ì¢íşõõ¹í‚®ãÇª„°‘öŸ×ÛñãßŸ¨¹óãù£±’°”ˆê¡öì;}public function checkWeixinInfo(){$Ú´ûŞ=input($_SERVER{¿Ç}[0]);…ä²öÉ“—ñÌŒÖÇ°;if($this->checkSignature()){echo $Ú´ûŞ;exit;}}public function checkSignature(){$å=&$_SERVER{¿Ç};Ë¤œÂ‘íÅéü«öÓ±Ü‡©¦šÁ™çÍï°ıø–À²‘ŒÖ­Ïè›ì®…éÚü¾ÙÅ¶;$à=input($å{0x001});Æ‹øÅ„†·¡“ÏâöêĞ¦;$»‚îù=input($å[0x0002]);É ¿äé‡ïãÌôóÓ¬•çºäË²ĞÙÂØÛ±Òëù“³;Ûşæ€ş‚ã–êÔ´ßƒ‚ú„ëÌ´¤µ¥üş¶ßîÜÌ;ªúš‚Èõ¼Œ…÷ğÑªÂî……Çà¶šÍ±­õáô¡€ğ»ƒºÌø×‰†İ;$ö=input($å{0x00003});¿Ø¹”š˜•üâÑ¢˜ïÇ–îıöŞÛÃª·øö”»ÅÓ•€è;$Ÿ±¿=get_config($å[0x000004]);‚à¨°âŸ“ØÀ”Éü—…É‘ÜÓ—»Ô;$É‹³Š=[];ô;$É‹³Š=[$»‚îù,$ö,$Ÿ±¿];àÂĞœ¹¯÷ıÚ°öÒÄ³™™É™‚í³„£ã;sort($É‹³Š);$É=sha1(implode($É‹³Š));Ææ öŞÑ•¥ÔÉ¾í“×ğ‚Œô¦ï™ıç®«‹¤öñëŞ’â½±µÍÆÚ¢‘™‘¥ğ‚§ı÷;®ˆä³Òõ‘¦Ìû;if($É==$à){return !0;}else{return !0x001;}}}